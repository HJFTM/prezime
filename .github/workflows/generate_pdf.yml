- name: Checkout main
  uses: actions/checkout@v4
  with:
    ref: main
    path: main

- name: Checkout gh-pages
  uses: actions/checkout@v4
  with:
    ref: gh-pages
    path: gh-pages

- name: Setup Node.js
  uses: actions/setup-node@v4
  with:
    node-version: 20

- name: Install Puppeteer
  working-directory: main
  run: npm ci

- name: Generate PDFs for all pages/*.html
  env:
    CURRENT_PROJECT: ${{ vars.CURRENT_PROJECT }}   # npr. uvod / bosna / stupnik / dubrovnik
    GH_PAGES_DIR: gh-pages
    PAGES_DIR: pages
    PUBLIC_HOST: https://hjftm.github.io
    # Ako trebaš postaviti ROD:
    # APPEND_QUERY: "?ROD=Bosna"
  run: node main/scripts/generate-pdf-html.js

# (nakon toga commit/push u gh-pages, npr. s peaceiris/actions-gh-pages ili ručno)
